<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 K Nearest Neighbors | Breast Canser</title>
  <meta name="description" content="Chapter 2 K Nearest Neighbors | Breast Canser" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 K Nearest Neighbors | Breast Canser" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 K Nearest Neighbors | Breast Canser" />
  
  
  

<meta name="author" content="Wang Ruiqi" />


<meta name="date" content="2023-05-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="logistic-regression.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">SHORT TITLE HERE</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Proposal</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#breast-cancer-data"><i class="fa fa-check"></i><b>1.1</b> Breast Cancer Data</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#describtion"><i class="fa fa-check"></i><b>1.1.1</b> Describtion</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#attribute-information"><i class="fa fa-check"></i><b>1.1.2</b> Attribute Information</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#the-modeling-goal"><i class="fa fa-check"></i><b>1.2</b> The modeling goal</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#the-models-for-using"><i class="fa fa-check"></i><b>1.3</b> The models for using</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html"><i class="fa fa-check"></i><b>2</b> K Nearest Neighbors</a>
<ul>
<li class="chapter" data-level="2.1" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html#general-knn-model"><i class="fa fa-check"></i><b>2.1</b> General KNN Model</a></li>
<li class="chapter" data-level="2.2" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html#factor-knn-model"><i class="fa fa-check"></i><b>2.2</b> 2 Factor KNN Model</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html#factor-sample-distribution"><i class="fa fa-check"></i><b>2.2.1</b> 2 Factor Sample Distribution</a></li>
<li class="chapter" data-level="2.2.2" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html#factor-model-prediction"><i class="fa fa-check"></i><b>2.2.2</b> 2 Factor Model Prediction</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>3</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="3.1" data-path="logistic-regression.html"><a href="logistic-regression.html#general-logistic-regression-model"><i class="fa fa-check"></i><b>3.1</b> General Logistic Regression Model</a></li>
<li class="chapter" data-level="3.2" data-path="logistic-regression.html"><a href="logistic-regression.html#logistic-regression-model-based-on-single-variable"><i class="fa fa-check"></i><b>3.2</b> Logistic Regression Model Based on Single Variable</a></li>
<li class="chapter" data-level="3.3" data-path="logistic-regression.html"><a href="logistic-regression.html#feature-distribution"><i class="fa fa-check"></i><b>3.3</b> Feature Distribution</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="random-forest.html"><a href="random-forest.html"><i class="fa fa-check"></i><b>4</b> Random Forest</a>
<ul>
<li class="chapter" data-level="4.1" data-path="random-forest.html"><a href="random-forest.html#general-random-forest-model"><i class="fa fa-check"></i><b>4.1</b> General Random Forest Model</a></li>
<li class="chapter" data-level="4.2" data-path="random-forest.html"><a href="random-forest.html#reduced-random-forest-model"><i class="fa fa-check"></i><b>4.2</b> Reduced Random Forest Model</a></li>
<li class="chapter" data-level="4.3" data-path="random-forest.html"><a href="random-forest.html#shapley-values"><i class="fa fa-check"></i><b>4.3</b> Shapley Values</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="random-forest.html"><a href="random-forest.html#shap-plot-with-one-instance"><i class="fa fa-check"></i><b>4.3.1</b> SHAP plot with one instance</a></li>
<li class="chapter" data-level="4.3.2" data-path="random-forest.html"><a href="random-forest.html#shap-plot-with-more-instances"><i class="fa fa-check"></i><b>4.3.2</b> SHAP plot with more instances</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="random-forest.html"><a href="random-forest.html#partial-dependecy"><i class="fa fa-check"></i><b>4.4</b> Partial Dependecy</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="reflections.html"><a href="reflections.html"><i class="fa fa-check"></i><b>5</b> Reflections</a>
<ul>
<li class="chapter" data-level="5.1" data-path="reflections.html"><a href="reflections.html#data-limitations"><i class="fa fa-check"></i><b>5.1</b> Data Limitations</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="reflections.html"><a href="reflections.html#unbalanced-features"><i class="fa fa-check"></i><b>5.1.1</b> Unbalanced Features</a></li>
<li class="chapter" data-level="5.1.2" data-path="reflections.html"><a href="reflections.html#unbalanced-class"><i class="fa fa-check"></i><b>5.1.2</b> Unbalanced Class</a></li>
<li class="chapter" data-level="5.1.3" data-path="reflections.html"><a href="reflections.html#lack-of-samples"><i class="fa fa-check"></i><b>5.1.3</b> Lack of Samples</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="reflections.html"><a href="reflections.html#future-improvements"><i class="fa fa-check"></i><b>5.2</b> Future Improvements</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="reflections.html"><a href="reflections.html#dataset"><i class="fa fa-check"></i><b>5.2.1</b> Dataset</a></li>
<li class="chapter" data-level="5.2.2" data-path="reflections.html"><a href="reflections.html#model-interpretion"><i class="fa fa-check"></i><b>5.2.2</b> Model Interpretion</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Breast Canser</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="k-nearest-neighbors" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> K Nearest Neighbors<a href="k-nearest-neighbors.html#k-nearest-neighbors" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The first model we are going to use is the <strong>K Nearest Neighbors</strong>.</p>
<div id="general-knn-model" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> General KNN Model<a href="k-nearest-neighbors.html#general-knn-model" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We first build KNN model based on all the sleceted variables: <code>tumor_zise</code>, <code>age</code>, <code>inv_nodes</code>, <code>deg_malig</code>.</p>
<pre><code>## The prediction error rate is: 0.3454545</code></pre>
<p>We obtain the prediction error rate is 0.34, which is not that good.</p>
</div>
<div id="factor-knn-model" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> 2 Factor KNN Model<a href="k-nearest-neighbors.html#factor-knn-model" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="factor-sample-distribution" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> 2 Factor Sample Distribution<a href="k-nearest-neighbors.html#factor-sample-distribution" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We then focus on the KNN model with 2 factors for a simplicity in model, we visualize the distribution of samples among 2 factors:</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-4-1.png" width="672" />
From the sample distribution, we can see the points in four plots are all interleaved with each other, and it’s hard for us to figure out a line to divide the points into 2 classes.</p>
<p>For continuous feature <code>age</code> and <code>tumor_size</code>, we see that the sample distribution has no difference in different classes, both class <code>noreoccur</code> and class <code>reoccur</code> has similar distribution among <code>age</code> and <code>tumor_size</code>. So we can say that if we only look at the one factor to analyze the breast cancer recurrence, then no matter people at any age and have any size of tumor, they all have possibility to have the cancer again.</p>
<p>For feature <code>deg_malig</code>, from the plots related to it, we can conclude that <code>deg_malig</code> seems to have unbalanced value distribution, where value=1 (after normalization) has a largest proportion. Also, consider the class distribution in feature <code>deg_malig</code>, when value=1, the samples seem to have more class <code>reoccur</code> than class <code>noreoccur</code>, and when value=-1.5, the samples seem to have more class <code>noreoccur</code> than class <code>reoccur</code>. Where can be concluded that feature <code>deg_malig</code> may be influential to classfication.</p>
<p>For feature <code>inv_nodes</code>, from the plots related to it, we can conclude that <code>inv_nodes</code> also seems to be influential for classification, we can see although for <code>noreoccur</code> samples, they seems to distributed balanced among <code>inv_nodes</code>, while for <code>reoccur</code> samples, when the <code>inv_nodes</code> value&gt;0 (after normalization), there are more <code>reoccur</code> samples distributed in the range <code>inv_nodes</code> value&lt;0.</p>
</div>
<div id="factor-model-prediction" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> 2 Factor Model Prediction<a href="k-nearest-neighbors.html#factor-model-prediction" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Then we focus on one specific modeling situation, we select feature <code>inv_nodes</code> and <code>deg_malig</code> as the model factor and then find the best k value for the knn model,</p>
<pre><code>##  [1] 0.2909091 0.2727273 0.2545455 0.2727273 0.2545455 0.2727273 0.2545455
##  [8] 0.2545455 0.2545455 0.2727273</code></pre>
<p>From the table above, we consider the situation where k = 5, and visualize the prediction plot,</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Still, we can see the points are interleaved with each other, and due to the plot of <code>alpha = 0.5</code>, we can see the specific interleaved situation. Obviously, when the points are interleaved with the same class, the predictions are correct, while when the points are interleaved with the different classes, we can see the model would predict the sample as class <code>noreoccur</code> most of the time. In the following models, we would discuss this model preference with a deeper perspective.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="logistic-regression.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ReallaggyWang/Breast-Cancer/edit/main/model1.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ReallaggyWang/Breast-Cancer/blob/main/model1.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Logistic Regression | Breast Canser</title>
  <meta name="description" content="Chapter 3 Logistic Regression | Breast Canser" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Logistic Regression | Breast Canser" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Logistic Regression | Breast Canser" />
  
  
  

<meta name="author" content="Wang Ruiqi" />


<meta name="date" content="2023-05-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="k-nearest-neighbors.html"/>
<link rel="next" href="random-forest.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">SHORT TITLE HERE</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Proposal</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#breast-cancer-data"><i class="fa fa-check"></i><b>1.1</b> Breast Cancer Data</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#describtion"><i class="fa fa-check"></i><b>1.1.1</b> Describtion</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#attribute-information"><i class="fa fa-check"></i><b>1.1.2</b> Attribute Information</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#the-modeling-goal"><i class="fa fa-check"></i><b>1.2</b> The modeling goal</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#the-models-for-using"><i class="fa fa-check"></i><b>1.3</b> The models for using</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html"><i class="fa fa-check"></i><b>2</b> K Nearest Neighbors</a></li>
<li class="chapter" data-level="3" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>3</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="3.1" data-path="logistic-regression.html"><a href="logistic-regression.html#general-logistic-regression-model"><i class="fa fa-check"></i><b>3.1</b> General Logistic Regression Model</a></li>
<li class="chapter" data-level="3.2" data-path="logistic-regression.html"><a href="logistic-regression.html#logistic-regression-model-based-on-single-variable"><i class="fa fa-check"></i><b>3.2</b> Logistic Regression Model Based on Single Variable</a></li>
<li class="chapter" data-level="3.3" data-path="logistic-regression.html"><a href="logistic-regression.html#feature-distribution"><i class="fa fa-check"></i><b>3.3</b> Feature Distribution</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="random-forest.html"><a href="random-forest.html"><i class="fa fa-check"></i><b>4</b> Random Forest</a>
<ul>
<li class="chapter" data-level="4.1" data-path="random-forest.html"><a href="random-forest.html#general-random-forest-model"><i class="fa fa-check"></i><b>4.1</b> General Random Forest Model</a></li>
<li class="chapter" data-level="4.2" data-path="random-forest.html"><a href="random-forest.html#reduced-random-forest-model"><i class="fa fa-check"></i><b>4.2</b> Reduced Random Forest Model</a></li>
<li class="chapter" data-level="4.3" data-path="random-forest.html"><a href="random-forest.html#shapley-values"><i class="fa fa-check"></i><b>4.3</b> Shapley Values</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="random-forest.html"><a href="random-forest.html#shap-plot-with-one-instance"><i class="fa fa-check"></i><b>4.3.1</b> SHAP plot with one instance</a></li>
<li class="chapter" data-level="4.3.2" data-path="random-forest.html"><a href="random-forest.html#shap-plot-with-more-instances"><i class="fa fa-check"></i><b>4.3.2</b> SHAP plot with more instances</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="random-forest.html"><a href="random-forest.html#partial-dependecy"><i class="fa fa-check"></i><b>4.4</b> Partial Dependecy</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="reflections.html"><a href="reflections.html"><i class="fa fa-check"></i><b>5</b> Reflections</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Breast Canser</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="logistic-regression" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Logistic Regression<a href="logistic-regression.html#logistic-regression" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="general-logistic-regression-model" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> General Logistic Regression Model<a href="logistic-regression.html#general-logistic-regression-model" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The second model we are going to use is the <strong>Logistic Regression Model</strong>.</p>
<p>We first build Logistic Regression model based on all the sleceted variables: <code>tumor_zise</code>, <code>age</code>, <code>inv_nodes</code>, <code>deg_malig</code>.</p>
<p>The train_dataset: test_dataset = 8:2.</p>
<pre><code>## # weights:  6 (5 variable)
## initial  value 153.878674 
## iter  10 value 114.232266
## final  value 114.226396 
## converged</code></pre>
<pre><code>## Call:
## nnet::multinom(formula = class ~ ., data = train.X)
## 
## Coefficients:
##                 Values Std. Err.
## (Intercept) -1.1504766 0.1804155
## age         -0.2245484 0.1664308
## inv_nodes    0.3202189 0.1626934
## tumor_size   0.1335999 0.1733618
## deg_malig    0.7702525 0.1920156
## 
## Residual Deviance: 228.4528 
## AIC: 238.4528</code></pre>
<p>We can conclude the specific model is: <span class="math inline">\(p(reoccur|x_1,x_2,x_3,x_4)=e^{-1.1504766-0.2245484x_1+0.3202189x_2+0.1335999x_3+0.7702525x_4}/(1+e^{-1.1504766-0.2245484x_1+0.3202189x_2+0.1335999x_3+0.7702525x_4})\)</span></p>
<pre><code>## The prediction error rate is: 0.2363636</code></pre>
<p>From the AIC and Residual Deviance and the error rate on test dataset, we can see the model is not that ideal, and we then visualize the prediction outcomes to check the specific situation.</p>
<p>Due to a multifactor logistic regression, here we define
<span class="math inline">\(temp = -1.1504766-0.2245484x_1+0.3202189x_2+0.1335999x_3+0.7702525x_4\)</span></p>
<p>We make plot that class versus temp values, then the <strong>cut-off line</strong> would be <span class="math inline">\(temp=0\)</span>, where
<span class="math inline">\(e^{-1.1504766-0.2245484x_1+0.3202189x_2+0.1335999x_3+0.7702525x_4}=1\)</span>.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>We can see that when in class <code>noreoccur</code>, the prediction is quite perfect, while all the errors happened in the class <code>reoccur</code>, the prediction is quite different with the truth. Inspired by the partial dependency, we can also plot the distribution of each factor to check the effect of the factor for classification.</p>
</div>
<div id="logistic-regression-model-based-on-single-variable" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Logistic Regression Model Based on Single Variable<a href="logistic-regression.html#logistic-regression-model-based-on-single-variable" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="finalproj_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>In our Multi Factors Logistic model,we take the class <code>noreoccur</code> as the reference, and we can see all these four factors do not have very significantly differences in distributions between two class, the most obvious factor is <code>age</code>, we can see that if the model only judge the class based on <code>age</code>, the prediction would all be class <code>noreoccur</code>, which indicates the age distribution may be very similar in two classes, also we can conclude the cancer reoccurrence rate may have little relation with <code>age</code>.</p>
<p>And the best factor we can say from the above figures is <code>inv_nodes</code>, because the model more possibility to predict the sample as class <code>reoccur</code>. While the rest three factors would have less possibility to predict the sample as class <code>reoccur</code>. This tendency of distribution manily leads to that the logistic model based on all four factors may not tell the difference of two classes and have a tendency to predcit the sample as class <code>noreoccur</code>. We can also study the features of correct predictions to prove this.</p>
</div>
<div id="feature-distribution" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Feature Distribution<a href="logistic-regression.html#feature-distribution" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Here we again plot the distribution of different features, and we use different color to represent the correct and wrong predictions,</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>Again, we can see in class <code>reoccur</code>, the correct prediction mostly happened in samples with unique values of factors, specially for feature <code>inv_nodes</code>, the correct predicted sample in class <code>reoccur</code> seems to have far distance with the other samples in class <code>reoccur</code>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="k-nearest-neighbors.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="random-forest.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ReallaggyWang/Breast-Cancer/edit/main/model2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ReallaggyWang/Breast-Cancer/blob/main/model2.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
